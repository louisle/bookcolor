UI={},window.UI=UI,$(document).ready(function(){$.fn.select2.defaults.set("language","vi"),$("select.select2").each(function(){if("undefined"!=typeof $(this).data()){var a=$(this).data();$(this).select2(a)}else $(this).select2()}),$(".slug-generator").on("input",function(){var a=$($(this).attr("data-bind"));a.val(CF.getSlug($(this).val()))}),$(".remove-link").on("click",function(a){a.preventDefault();var b=$(this).attr("href");CF.ajax({confirm:!0,url:b,success:function(){CF.reload()}})}),$("form").on("blur","input[required], input.optional, select.required",validator.checkField).on("change","select.required",validator.checkField).on("keypress","input[required][pattern]",validator.keypress),$("form").on("submit",function(){return validator.checkAll($(this))?void 0:!1}),$(".tag-editor").tagsInput({width:"auto"}),tinymce.init({selector:"textarea.editor",theme:"modern",plugins:["advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table contextmenu directionality","emoticons template paste textcolor colorpicker textpattern imagetools"],toolbar1:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",toolbar2:"print preview media | forecolor backcolor emoticons",menubar:!1,image_advtab:!0,content_css:["//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"],relative_urls:!1,remove_script_host:!1,convert_urls:!0,file_browser_callback:function(a,b,c,d){var e=$("<form class='hidden' action='/admin/uploadimage' method='post'></fomr>");e.append("<input type='file' name='image' accept='.jpg,.jpeg,.png,.gif' />"),e.appendTo("body"),e.ajaxForm({success:function(b){b&&b.success?$("#"+a).val(b.url):alert(b.error),e.remove()}}),e.find("input").on("change",function(){$(this).parent("form").submit()}),e.find("input").click()}}),$("#linkTypeSelect").on("change",function(){a()});var a=function(){"undefined"!=typeof $("#linkTargetSelect").select2()&&0==$("#linkTargetSelect option[selected]").length&&$("#linkTargetSelect").html("");var a={ajax:{url:$("#linkTypeSelect").val(),dataType:"json",data:function(a){return{q:a.term,page:a.page}},processResults:function(a,b){console.log(b),b.page=b.page||1;var c;return"undefined"!=typeof a.blogs&&(c=a.blogs),"undefined"!=typeof a.articles&&(c=a.articles),{results:c,pagination:{more:10*b.page<a.total_result}}},cache:!0},escapeMarkup:function(a){return a},templateResult:function(a){return"<option value='"+a.id+"'>"+a.title+"</option>"},templateSelection:function(a){return a.title}};$("#linkTargetSelect").select2(a)};a()});